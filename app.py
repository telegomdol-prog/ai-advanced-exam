import streamlit as st
import random

# νμ΄μ§€ μ„¤μ •
st.set_page_config(page_title="AI Advanced λ§μ¤ν„° μ‹ν—", page_icon="π“", layout="wide")

# 1. λ¬Έμ  λ°μ΄ν„° (μμ  λ° λ³€ν• λ¬Έμ  κΈ°λ°)
questions = [
    {
        "no": 1,
        "q": "RAG μ‹μ¤ν…μ μµμΆ… λ©ν‘λ΅ κ°€μ¥ μ μ ν• κ²ƒμ€ λ¬΄μ—‡μ…λ‹κΉ?",
        "options": ["μ†λ„ μ„μ£Όμ κ²€μƒ‰", "κ°€μ¥ μ‘μ€ DB κµ¬μ¶•", "ν¨κ³Όμ μΈ μ»¨ν…μ¤νΈ κµ¬μ„±μΌλ΅ μ •ν™•ν• λ‹µλ³€ μƒμ„±", "LLM μ—†μ΄ λ‹µλ³€ μ κ³µ"],
        "answer": 2,
        "ref": "κµμ¬ 1κ¶: RAGμ λ³Έμ§"
    },
    {
        "no": 2,
        "q": "LORA κΈ°λ²•μ ν•µμ‹¬ νΉμ§•μ€ λ¬΄μ—‡μ…λ‹κΉ?",
        "options": ["μ „μ²΄ νλΌλ―Έν„° μ¬ν•™μµ", "κΈ°λ³Έ κ°€μ¤‘μΉ μ‚­μ ", "μ €μ°¨μ› ν–‰λ ¬(A,B)λ§ ν•™μµν•μ—¬ ν¨μ¨ μ¦λ€", "μ΄λ―Έμ§€ λ°μ΄ν„° μ „μ© νλ‹"],
        "answer": 2,
        "ref": "κµμ¬ 4κ¶: λ―Έμ„Έ μ΅°μ •"
    },
    # ... (λ” λ§μ€ λ¬Έμ λ¥Ό μ—¬κΈ°μ— μ¶”κ°€ν•  μ μμµλ‹λ‹¤)
]

# 2. UI κµ¬μ„±
st.title("π“ AI Advanced μ‹¤μ „ λ€λΉ„ ν…μ¤νΈ")
st.sidebar.header("λ©”λ‰΄")
menu = st.sidebar.radio("μ΄λ™ν•  ν™”λ©΄", ["ν•µμ‹¬ μ”μ•½ λ…ΈνΈ", "μ‹¤μ „ ν…μ¤νΈ", "AI νν„°μ—κ² μ§λ¬Έ"])

# --- ν™”λ©΄ 1: ν•µμ‹¬ μ”μ•½ λ…ΈνΈ ---
if menu == "ν•µμ‹¬ μ”μ•½ λ…ΈνΈ":
    st.header("π“ μ „κ¶ ν†µν•© ν•µμ‹¬ μ •λ¦¬")
    st.info("μ‹ν— μ „ 10λ¶„! μ΄ λ‚΄μ©λ§μ€ λ°λ“μ‹ μ™μ§€ν•μ„Έμ”.")
    st.markdown("""
    - **RAG:** κ²€μƒ‰ κΈ°λ° μƒμ„±. ν™κ°(Hallucination) λ°©μ§€κ°€ μ£Όλ λ©μ .
    - **Chunking:** λ°μ΄ν„°λ¥Ό μΌκ°λ” κΈ°μ . λ„λ¬΄ μ‘μΌλ©΄ λ¬Έλ§¥ μƒμ‹¤, ν¬λ©΄ λ…Έμ΄μ¦ λ°μƒ.
    - **LoRA:** μ €μ°¨μ› ν–‰λ ¬λ§ ν•™μµν•μ—¬ GPU λ©”λ¨λ¦¬ μ μ•½.
    - **Self-Attention:** λ‹¨μ–΄ κ°„μ κ΄€κ³„ νμ•…. νΈλμ¤ν¬λ¨Έμ ν•µμ‹¬.
    """)

# --- ν™”λ©΄ 2: μ‹¤μ „ ν…μ¤νΈ ---
elif menu == "μ‹¤μ „ ν…μ¤νΈ":
    st.header("π“ μ‹¤μ „ λ¨μκ³ μ‚¬ (20λ¬Έν•­)")
    
    score = 0
    user_answers = []
    
    for i, q in enumerate(questions):
        st.subheader(f"Q{i+1}. {q['q']}")
        ans = st.radio(f"μ •λ‹µμ„ μ„ νƒν•μ„Έμ” ({i})", q['options'], key=f"q_{i}")
        user_answers.append(ans)
        
    if st.button("μ‹ν—μ§€ μ μ¶ν•κΈ°"):
        st.balloons()
        # μ±„μ  λ΅μ§
        for i, q in enumerate(questions):
            if q['options'].index(user_answers[i]) == q['answer']:
                score += 1
        
        final_score = (score / len(questions)) * 100
        st.success(f"### μµμΆ… μ μ: {final_score}μ ")
        if final_score >= 80:
            st.write("π‰ μ¶•ν•ν•©λ‹λ‹¤! ν•©κ²©κ¶μ…λ‹λ‹¤.")
        else:
            st.write("π“ μ΅°κΈ λ” λ¶„λ°ν•΄λ΄…μ‹λ‹¤! μ”μ•½ λ…ΈνΈλ¥Ό λ‹¤μ‹ ν™•μΈν•μ„Έμ”.")

# --- ν™”λ©΄ 3: AI νν„°μ—κ² μ§λ¬Έ ---
elif menu == "AI νν„°μ—κ² μ§λ¬Έ":
    st.header("π¤– λ¬΄μ—‡μ΄λ“  λ¬Όμ–΄λ³΄μ„Έμ” (AI Tutor)")
    st.write("κ³µλ¶€ν•λ‹¤κ°€ μ΄ν•΄κ°€ μ• λλ” κ°λ…μ„ μ…λ ¥ν•λ©΄ AIκ°€ μ„¤λ…ν•΄μ¤λ‹λ‹¤.")
    
    user_q = st.text_input("μ§λ¬Έμ„ μ…λ ¥ν•μ„Έμ” (μ: Rerankerκ°€ μ™ ν•„μ”ν•κ°€μ”?)")
    if user_q:
        # μ΄ λ¶€λ¶„μ— μ‹¤μ  OpenAI/Gemini APIλ¥Ό μ—°κ²°ν•  μ μμµλ‹λ‹¤.
        # μ—¬κΈ°μ„λ” κ°„λ‹¨ν• μ‘λ‹µ μ‹λ®¬λ μ΄μ…μ„ λ³΄μ—¬μ¤λ‹λ‹¤.
        st.info(f"'{user_q}'μ— λ€ν• AIμ λ‹µλ³€μ„ μƒμ„± μ¤‘μ…λ‹λ‹¤...")
        st.write("π’΅ (μ°Έκ³ : μ‹¤μ  λ°°ν¬ μ‹ API ν‚¤λ¥Ό μ…λ ¥ν•λ©΄ μ‹¤μ‹κ°„ λ‹µλ³€μ΄ κ°€λ¥ν•©λ‹λ‹¤.)")
